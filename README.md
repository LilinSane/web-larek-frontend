# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

---

# Суть проекта

Веб-приложение с товарами для веб-разработчиков. Позволяет искать нужные товары в каталоге, добавлять их себе в корзину и оформлять заказ с доставкой.

---

# Архитектура

---

В основе архитектуры приложения лежит шаблон проектирования `MVP` + `Publisher-Subscriber`.

![Рисунок 1. Архитектура приложения](architecture.drawio.png)

## Model

Слой данных и бизнес логики. 

К данным относятся data-классы, которые только содержат соответствующие им поля.  

К сервисам относятся классы, которые работают только с соответствующими для них объектами, а также они используют сервис `Api`, который позволяет обмениваться данными с сервером. Сервис `Api` является общим для всех сервисов.

Слой модели является `publisher` в данной архитектуре.

---

## View

Слой представлений. 

Сюда относятся все классы, являющиеся view-компонентами, которые принимают в себя соответствующие данные и подписываются на соответствующие события изменения данных, для того чтобы выполнить `render()` и обновить текущий `UI`.

`UI` - то что видит пользователь. Это может быть отрисованная вёрстка веб-сайта или десктопного/мобильного приложения.

Слой представления является `subscriber` в данной архитектуре.

---

## Presentor

Слой управления.

Является связующим звеном для двух предыдущих слоёв и реализован, по большей части, засчёт брокера сообщений, где `publisher` выкладывает обработчик в именованный топик, а `subscriber` будет вызывать этот обработчик при смене состояния.

По скольку сервисы не отвечают за добавление обработчиков в брокер, этим будет заниматься часть презентора, которая при инициализации приложения сразу свяжет события и обработчики.

# Описание основных программных компонентов системы 

## Data-типы (модель данных)

### ICart
Интерфейс `ICart` описывает состояние корзины пользователя.  
Содержит идентификатор корзины и список продуктов, добавленных пользователем для покупки.

---

### IOrderPayload
Интерфейс `IOrderPayload` описывает данные заказа, отправляемые на сервер.  
Используется при оформлении заказа и содержит информацию о способе оплаты, контактах пользователя, адресе доставки, итоговой сумме и списке идентификаторов товаров.

---

### IPaymentData
Интерфейс `IPaymentData` описывает данные ответа сервера после оформления заказа.  
Содержит идентификатор созданного заказа и итоговую сумму оплаты.

---

### IProduct
Интерфейс `IProduct` описывает товар магазина.  
Содержит основные данные товара, необходимые для отображения в каталоге и работе с корзиной.

---

### IProductList
Интерфейс `IProductList` описывает список товаров, получаемых с сервера.  
Используется для хранения набора продуктов и общего количества элементов в каталоге.

---

### PaymentMethod
Тип `PaymentMethod` описывает допустимые способы оплаты заказа.  
Используется в данных заказа для ограничения возможных значений оплаты.

---

### ProductCategory
Тип `ProductCategory` описывает категорию товара.  
Используется для классификации товаров и их группировки в интерфейсе.

---

## API и сервисы (слой работы с данными)

### IApiClient
Интерфейс `IApiClient` описывает клиент для взаимодействия с серверным API.  
Определяет базовые методы для выполнения HTTP-запросов и обработки ответов сервера.

---

### ICartService
Интерфейс `ICartService` описывает сервис для работы с корзиной.  
Содержит методы для получения состояния корзины, добавления товаров и удаления товаров из корзины.

---

### IOrderService
Интерфейс `IOrderService` описывает сервис для отправки заказов на сервер.  
Отвечает за оформление заказа и получение результата его создания.

---

### IProductService
Интерфейс `IProductService` описывает сервис для работы с товарами.  
Содержит методы для загрузки списка товаров и получения информации о конкретном товаре.

---

## События приложения

### AppEvent
Перечисление `AppEvent` содержит список событий приложения.  
Используется для централизованного описания событий, возникающих при загрузке данных, работе с корзиной и оформлении заказа.

---

## Представления (View)

### IViewComponent
Интерфейс `IViewComponent` описывает базовый компонент отображения.  
Определяет метод рендеринга, возвращающий DOM-элемент на основе переданных данных.

---

### IViewConstructor
Интерфейс `IViewConstructor` описывает конструктор компонента отображения.  
Используется для типизации создания вью-компонентов, которым передаются контейнер DOM и брокер событий.

